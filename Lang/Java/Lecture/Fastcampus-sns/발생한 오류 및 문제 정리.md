
## 프론트 코드 빌드

front-code 코드 복사 후, npm이 실행되고 tomcat도 정상적으로 실행되나 localhost:8080 으로 접속하면 Whitelabel Error Page 가 뜸

-> `build.gradle` 파일에서 다음 내용으로 수정
```java
// 수정 전
node {
    nodeModulesDir = file("$projectDir/front-end")
    version = '18.3.0'
    download = true
}

task npmBuild(type: NpmTask) {
    args = ['run', "build"]
}

task copyFrontEnd(type: Copy) {
    from "$projectDir/front-end/static"
    into 'build/resources/main/static/.'
}

task cleanFrontEnd(type: Delete) {
    delete "$projectDir/front-end/static", "$projectDir/front-end/node_modules"
}

```


```java
// 수정 후
node {  
nodeProjectDir = file("$projectDir/front-end")  // nodeModulesDir는 deprecated되었으므로 nodeProjectDir로 변경
version = '18.3.0'  
download = true  
}  
  
task npmBuild(type: NpmTask) {  
args = ['run', "build"]  
}  
  
task copyFrontEnd(type: Copy) {  
from "$projectDir/front-end/build/"  // 프론트 경로 변경
into 'build/resources/main/static/.'  
}  
  
task cleanFrontEnd(type: Delete) {  
delete "$projectDir/front-end/build/", "$projectDir/front-end/node_modules"  // clean용 프론트 경로도 변경
}
```

node의 사양변경인지 뭔지는 모르겠지만 static/폴더가 존재하지 않으므로, 프론트의 경로를 static폴더를 build로 수정

## 배포
Heroku가 유료화된 관계로 EC2에 서버 올리고 CI/CD 통합해보는걸로 해보려함.
- 목표 : 깃허브 리포지토리 main 브랜치에 새로운 변경이 발생하면, EC2에 자동으로 푸쉬 및 배포 됨

[# GitHub Actions, AWS CodeDeploy 를 활용한 CI/CD 적용](https://velog.io/@cataiden/ci-cd-with-github-actions-and-aws-codedeploy)
