---
tags:
  - 액션과_계산_데이터
---
>[!abstract]
>### 이번 장에서 살펴볼 내용
>- 액션과 계산, 데이터가 어떻게 다른지 배움
>- 문제에 대해 생각하거나 코드를 작성할 때 또는 코드를 읽을 때 액션과 계산, 데이터를 구분해서 적용함
>- 액션이 코드 전체로 퍼질 수 있다는 것을 이해함
>- 이미 있는 코드에서 어떤 부분이 액션인지 찾아봄

## 액션과 계산, 데이터
| 액션                                                                                                     | 계산                                                                | 데이터                                  |
| ------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------- | ------------------------------------ |
| 실행 시점과 횟수에 의존함                                                                                         | 입력으로 출력을 계산함                                                      | 이벤트에 대한 사실                           |
| 다른 말로 부수 효과(side-effects), 부수 효과가 있는 함수(side-effecting function), 순수하지 않은 함수(impure function)라고 부르기도 함 | 다른 말로 순수 함수(pure function), 수학 함수(mathematical function)라고 부르기도 함 |                                      |
| 예) 이메일 보내기, 데이터 베이스 읽기                                                                                 | 예) 최댓값 찾기, 이메일 주소가 올바른지 확인하기                                      | 예) 사용자가 입력한 이메일 주소, 은행 API로 읽은 달러 수량 |
> [!note]
> 계산은 계산을 호출하는 코드를 계산 결과로 바꿀 수 있기 때문에 참조 투명(referentially transparent)함. 2 + 3의 예에서, +는 계산이기 때문에 2 + 3의 결과는 항상 5임. 그래서 2 + 3 이라는 코드를 5라는 결괏값으로 바꿔도 프로그램이 달라지지 않음. 다른 말로 하면 2 + 3 코드의 결과는 항상 같기 때문에 여러 번 불러도 문제가 없다는 뜻.

- 모든 개발 과정에서 액션과 계산, 데이터를 구분하는 기술을 적용할 수 있음
	- 1단계 : 문제에 대해 생각할 때
		- 코딩을 시작하기 전이고 문제에 대해서 고민하고 있을 때도 문제를 액션과 계산, 데이터로 나눠 생각해볼 수 있음.
		- 문제를 액션과 계산, 데이터로 나눠보면 코드를 작성할 때 특별히 주의해야 할 부분(액션)과 데이터로 처리해야 할 부분, 결정을 내려야 하는 부분(계산)을 명확히 알 수 있음
	- 2단계 : 코딩할 때
		- 코딩을 할 때도 액션과 계산, 데이터를 구분할 수 있음
		- 함수형 프로그래머는 최대한 액션에서 계산을 빼내려고 하고, 계산에서 데이터를 분리할 수 있는지 생각함
		- 액션이 계산이 될 수 있는지, 계산은 데이터가 될 수 있는지 고민함
	- 3단계 : 코드를 읽을 때
		- 코드를 읽을 때 액션과 계산, 데이터 중 어떤 것에 속하는지 살펴봐야 함
		- 액션은 시간에 의존하기 때문에 더 조심해야하며, 숨어있는 액션까지 찾아내야 함.
> [!note]
> 액션은 호출 시점과 횟수에 의존함
> 
>	- 냉장고 확인하기 - 냉장고를 확인하는 시점에 따라 냉장고에 있는 제품이 다르기 때문에 액션. 냉장고 안에 있는 제품은 데이터.
>	- 운전해서 상점으로 가기 - 두 번 운전해서 상점에 가면 연료가 두 배로 듦. 상점 위치, 가는 경로는 데이터.
>	- 필요한 것 구입하기 - 누군가 브로콜리를 구입하면 브로콜리가 없을 수도 있기 때문
>	- 운전해서 집으로 오기 - 이미 집에 있다면 상점에서 집으로 올 수 없음.(실행 시기가 중요함)

## 장보기 과정에서 배운 것
- 액션과 계산, 데이터는 어디에나 적용할 수 있음
- 액션 안에는 계산과 데이터, 또 다른 액션이 숨어 있을 수 있음
- 계산은 더 작음 계산과 데이터로 나누고 연결할 수 있음
- 데이터는 데이터만 조합할 수 있음
- 계산은 때로 우리 머릿속에서 일어남
	- 장을 보는 상황에서 무엇을 사야할지는 머릿속에서 저절로 생각남(계산이 사고 과정에 녹아있음)

> [!note]
> ### 데이터에 대해 자세히 알아보기
> - 데이터는 무엇인가?
> 	- 데이터는 이벤트에 대한 사실. 일어난 일의 결과를 기록한 것.
> - 데이터를 어떻게 구현하는가?
> 	- 자바스크립트에서는 기본 데이터 타입으로 구현함. 숫자나 문자, 배열, 객체 같은 것. 다른 언어에서는 더 정교한 방법으로 데이터를 만들 수 있음.
> 	- 하스켈은 새로운 데이터 타입을 정의해 도메인을 표현함
> - 어떻게 데이터에 의미를 담을 수 있는가?
> 	- 데이터 구조로 의미를 담을 수 있음. 목록의 순서가 중요하다면 순서를 보장하는 데이터 구조를 사용하면 됨.
> 	- 데이터 구조로 도메인을 표현할 수 있음
> - 불변성
> 	- 함수형 프로그래머는 불변 데이터 구조를 만들기 위해 두 가지 원칙을 사용함
> 	- 1. 카피-온-라이트 copy-on-write, 변경할 때 복사본을 만듦
> 	- 2. 방어적 복사 defensive copy, 보관하려고 하는 데이터의 복사본을 만듦
> 	- 이 원칙은 [[06. 변경 가능한 데이터 구조를 가진 언어에서 불변성을 유지하기 | 6장]]과 [[07. 신뢰할 수 없는 코드를 쓰면서 불변성 지키기 | 7장]]에서 다룰 예정
> - 데이터의 예
> 	- 구입하려는 음식 목록
> 	- 이름
> 	- 전화 번호
> 	- 음식 조리법
> - 데이터의 장점은?
> 	- 역설적으로 데이터는 데이터 자체로 할 수 있는 것이 없기 때문에 좋음
> 	- 데이터는 데이터 그대로 이해할 수 있음
> 		- 1. ==직렬화== 
> 			- 직렬화된 액션과 계산은 다른 곳에서 잘 동작할 것이라는 보장이 없음
> 			- 하지만 직렬화된 데이터는 전송하거나 디스크에 저장했다가 읽기 쉬움
> 		- 2. ==동일성 비교==
> 			- 계산이나 액션은 서로 비교하기 어려우나 데이터는 비교하기 쉬움
> 		- 3. ==자유로운 해석==
> 			- 데이터는 여러 가지 방법으로 해석할 수 있음
> 			- 접속 로그는 문제 해결을 위해 사용할 수 있지만, 모니터링을 위해 사용할 수도 있음
> - 데이터의 단점은?
> 	- 유연하게 해석할 수 있다는 점은 장점
> 	- 해석이 반드시 필요하다는 점은 단점
> 	- 계산은 해석하지 않아도 실행할 수 있음
> 	- 해석하지 않은 데이터는 쓸모없는 바이트일 뿐임

> [!important]
> 데이터를 언제나 쉽게 해석할 수 있도록 표현하는 것이 함수형 프로그래밍에서 중요한 기술임

